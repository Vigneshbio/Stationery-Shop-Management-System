<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Stationery Shop</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
      crossorigin="anonymous"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/remixicon@4.5.0/fonts/remixicon.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script>
    <script type="text/javascript">
      (function () {
        emailjs.init({ publicKey: "f6pxCztEt4C2IsD9X" });
      })();
    </script>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark" id="navbar">
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Smart Shop</a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarSupportedContent"
          aria-expanded="false"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav mx-auto">
            <li class="nav-item">
              <a class="nav-link active" href="#home">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="#about">About</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="#products">Products</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="#contact">Contact</a>
            </li>
          </ul>
          <div class="btn-holder ml-auto">
            {% if 'username' in session %}
            <div class="dropdown">
              <button
                class="btn btn-outline-success dropdown-toggle"
                type="button"
                id="userMenu"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
              >
                {{ session['username'][0]|upper }}
              </button>
              <div
                class="dropdown-menu dropdown-menu-right"
                aria-labelledby="userMenu"
              >
                <span class="dropdown-item-text text-success font-weight-bold">
                  Signed in as {{ session['username'] }}
                </span>
                <div class="dropdown-divider"></div>
                {% if session.get('username') == 'admin' %}
                <a class="dropdown-item" href="/admin/add-product">Add Product</a>
                <a class="dropdown-item" href="/admin/manage-products">Manage Products</a>
                <div class="dropdown-divider"></div>
                {% endif %}
                <a class="dropdown-item text-danger" href="/logout">Logout</a>
              </div>
            </div>
            {% else %}
            <a href="/login.html" class="btn btn-outline-light">Sign in</a>
            {% endif %}
          </div>

          <div class="shopping_basket" id="cartIcon">
            <div class="cart-items">
              <i class="ri-shopping-cart-line"></i>
              <span class="cart-item-count">0</span>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <section id="home">
      <h1 class="text-centre">Stationery Materials</h1>
      <br />
      <p>Fuel your creativity with stationery that inspires</p>
    </section>

    <section id="about">
      <div class="container-fluid">
        <div class="row">
          <div class="col-lg-6 col-md-6 col-12">
            <img
              src="{{ url_for('static', filename='images/B4.png') }}"
              class="img-fluid"
            />
          </div>
          <div class="col-lg-5 col-md-5 col-12">
            <h1>ABOUT US</h1>
            <p>
              Welcome to Smart Shop – your one-stop destination for premium
              stationery. We offer a wide range of quality products including
              notebooks, pens, school supplies, office essentials, art
              materials, and more. Whether you're a student, artist, or
              professional, we have the perfect tools to fuel your creativity
              and productivity. At Smart Shop, customer satisfaction is our top
              priority. We guarantee 100% satisfaction on every purchase and
              offer a hassle-free return policy. With trusted brands, affordable
              prices, and reliable service, we’re committed to making your
              stationery shopping experience smooth and delightful. Thank you
              for choosing Smart Shop!
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="products">
      <div class="container py-5">
        <h1 class="text-centre my-5">OUR PRODUCTS</h1>
        <div class="d-flex justify-content-center my-4">
          <div class="search-container position-relative">
            <input
              id="searchInput"
              type="text"
              class="form-control form-control-lg"
              placeholder="Search"
              aria-label="Search"
            />
            <button class="btn search-btn" type="submit">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </div>
        <div class="product-container">    
            <div class="container">
              <div class="row">
                {% for product in products %}
                <div class="col-lg-4 col-md-6 col-12 mb-4">
                  <div class="card product-card h-100">
                    <img
                      src="{{ url_for('static', filename=product.images) }}"
                      class="card-img-top product-img"
                      alt="{{ product.name }}"
                      data-image="{{ url_for('static', filename=product.images) }}"
                      onclick="showImage(this)"
                    />
                    <div class="card-body text-center">
                      <h5 class="card-title">{{ product.name }}</h5>
                      <p class="style-rs">Rs.{{ product.price }}</p>
                      <span class="badge badge-info position-absolute" style="top: 10px; right: 10px;">
                       Stock: {{ product.quantity }}
                        </span>
                      <button
                        class="btn signin add-to-cart"
                        data-id="{{ product.id }}"
                        data-title="{{ product.name }}"
                        data-price="{{ product.price }}"
                        data-image="{{ product.images }}"
                      >
                        Add To Cart
                      </button>
                    </div>
                  </div>
                </div>
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="contact">
      <div class="container-fluid box">
        <div class="row">
          <div class="col-lg-6 col-md-6 col-12">
            <img
              src="{{ url_for('static', filename='images/b2.jpg') }}"
              class="img-fluid"
            />
          </div>
          <div class="col-lg-6 col-md-6 col-12">
            <h1>CONTACT US</h1>
            <form id="contactForm" class="mb-3" onsubmit="sendMail(event)">
              <input
                id="name"
                type="text"
                class="form-control"
                placeholder="Enter your name"
              />
              <input
                id="email"
                type="email"
                class="form-control"
                placeholder="Enter your email"
              />
              <textarea
                id="message"
                class="form-control"
                placeholder="Enter your Message"
              ></textarea>
              <button type="submit" class="btn signin">Send</button>
            </form>
          </div>
        </div>
      </div>
    </section>

    <div class="cart-use">
      <div class="cart-header">
        <h3>Your Cart</h3>
      </div>
      <div class="cart-content">
        <ul class="productList"></ul>
        <div class="empty-cart" style="display: none">
          <i class="ri-shopping-cart-line empty-cart-icon"></i>
          <p>Your cart is empty</p>
          <small>Add some items to get started!</small>
        </div>
      </div>
      <div class="checkout">
        <div class="total">
          <small>Subtotal (<span id="total-items"></span> items)</small>
          <div class="total-price">$<span id="total-amount">0.00</span></div>
        </div>
        <div class="checkout-btn" id="checkout-btn">Checkout</div>
        <div class="close">Close</div>
      </div>
    </div>

    <footer>Copyrights Smart Shop @2025</footer>
    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"
      crossorigin="anonymous"
    ></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
<div class="modal fade" id="imageModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
    <div class="modal-content bg-transparent border-0">
      <div class="modal-body text-center p-0">
        <img id="modalImage" src="" class="img-fluid rounded shadow" alt="Product Preview" />
      </div>
    </div>
  </div>
</div>
<script>
  function showImage(imgElement) {
    const src = imgElement.getAttribute("data-image");
    const modalImg = document.getElementById("modalImage");
    modalImg.src = src;   
    $("#imageModal").modal("show"); 
  }
</script>


  </body>
</html>
